# ğŸ›’ E-Commerce Platform - Microservices Architecture

> **Dá»± Ã¡n Capstone: Web Technologies and E-services**  
> TrÆ°á»ng Äáº¡i há»c BÃ¡ch khoa HÃ  Ná»™i - Há»c ká»³ 2024.2

[![Deploy Status](https://github.com/ntabodoiqua/cnweb_20251/actions/workflows/deploy.yml/badge.svg)](https://github.com/ntabodoiqua/cnweb_20251/actions)
[![Java](https://img.shields.io/badge/Java-21-orange.svg)](https://www.oracle.com/java/)
[![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.2.2-brightgreen.svg)](https://spring.io/projects/spring-boot)
[![License](https://img.shields.io/badge/License-Educational-blue.svg)](LICENSE)

## ğŸ“– Tá»•ng Quan

Ná»n táº£ng thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ full-stack Ä‘Æ°á»£c xÃ¢y dá»±ng theo kiáº¿n trÃºc microservices hiá»‡n Ä‘áº¡i, sá»­ dá»¥ng Spring Cloud ecosystem vÃ  React. Dá»± Ã¡n táº­p trung vÃ o kháº£ nÄƒng má»Ÿ rá»™ng, báº£o trÃ¬ vÃ  triá»ƒn khai tá»± Ä‘á»™ng thÃ´ng qua CI/CD pipeline.

### âœ¨ TÃ­nh NÄƒng ChÃ­nh

- ğŸ” **Authentication & Authorization** - JWT-based vá»›i role management
- ğŸ‘¥ **User Management** - ÄÄƒng kÃ½, Ä‘Äƒng nháº­p, quáº£n lÃ½ profile
- ğŸ“¦ **Product Management** - CRUD sáº£n pháº©m, phÃ¢n loáº¡i, tÃ¬m kiáº¿m
- ğŸ›’ **Order Processing** - Giá» hÃ ng, Ä‘áº·t hÃ ng, theo dÃµi Ä‘Æ¡n hÃ ng
- ğŸ’³ **Payment Integration** - Xá»­ lÃ½ thanh toÃ¡n Ä‘a dáº¡ng
- ğŸ“§ **Email Notifications** - ThÃ´ng bÃ¡o tá»± Ä‘á»™ng qua email
- ğŸ“ **File Management** - Upload vÃ  quáº£n lÃ½ files/images
- ğŸ“Š **Admin Dashboard** - Quáº£n trá»‹ há»‡ thá»‘ng toÃ n diá»‡n

## ğŸ‘¥ NhÃ³m PhÃ¡t Triá»ƒn

| Há» vÃ  TÃªn        | MSSV     | Vai TrÃ²                        |
| ---------------- | -------- | ------------------------------ |
| Nguyá»…n Tháº¿ Anh   | 20224921 | Team Leader, Backend Developer |
| Há»“ LÆ°Æ¡ng An      | 20224821 | Backend Developer              |
| BÃ¹i Kháº¯c Anh     | 20225246 | Frontend Developer             |
| LÃª ÄÃ¬nh HÃ¹ng Anh | 20224917 | DevOps Engineer                |

## ğŸ—ï¸ Kiáº¿n TrÃºc Há»‡ Thá»‘ng

### Microservices Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚
â”‚  (React)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          API Gateway (8080)             â”‚
â”‚    - Routing & Load Balancing           â”‚
â”‚    - Rate Limiting                      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Discovery Service (Eureka:8761)      â”‚
â”‚    - Service Registry                   â”‚
â”‚    - Health Monitoring                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼          â–¼          â–¼          â–¼          â–¼          â–¼          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”
   â”‚User  â”‚  â”‚Productâ”‚ â”‚Order â”‚  â”‚Paymentâ”‚ â”‚File  â”‚  â”‚Notif â”‚  â”‚Commonâ”‚
   â”‚:8081 â”‚  â”‚:8082 â”‚  â”‚:8083 â”‚  â”‚:8085 â”‚  â”‚:8086 â”‚  â”‚:8084 â”‚  â”‚DTO   â”‚
   â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜
      â”‚         â”‚         â”‚         â”‚         â”‚         â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   External Services   â”‚
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚ - PostgreSQL          â”‚
              â”‚ - Redis/Valkey        â”‚
              â”‚ - RabbitMQ            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Services Overview

| Service                  | Port | MÃ´ Táº£                                | Tech Stack               |
| ------------------------ | ---- | ------------------------------------ | ------------------------ |
| **Discovery Service**    | 8761 | Service registry vÃ  discovery        | Spring Cloud Eureka      |
| **API Gateway**          | 8080 | Entry point, routing, load balancing | Spring Cloud Gateway     |
| **User Service**         | 8081 | Quáº£n lÃ½ ngÆ°á»i dÃ¹ng, authentication   | Spring Security, JWT     |
| **Product Service**      | 8082 | Quáº£n lÃ½ sáº£n pháº©m, catalog            | Spring Data JPA          |
| **Order Service**        | 8083 | Xá»­ lÃ½ Ä‘Æ¡n hÃ ng, giá» hÃ ng             | Spring Data JPA          |
| **Notification Service** | 8084 | Gá»­i email, notifications             | JavaMailSender, RabbitMQ |
| **Payment Service**      | 8085 | Xá»­ lÃ½ thanh toÃ¡n                     | Spring WebFlux           |
| **File Service**         | 8086 | Upload/download files                | Multipart File Handling  |
| **Common DTO**           | -    | Shared data transfer objects         | Java POJOs               |

## ğŸ› ï¸ Technology Stack

### Backend

- **Core Framework**: Java 21, Spring Boot 3.2.2
- **Microservices**: Spring Cloud (Eureka, Gateway, OpenFeign, Config)
- **Security**: Spring Security, JWT, BCrypt
- **Database**: PostgreSQL 15 (DigitalOcean Managed Database)
- **Caching**: Redis/Valkey (DigitalOcean)
- **Message Queue**: RabbitMQ (CloudAMQP)
- **API Documentation**: SpringDoc OpenAPI 3

### Frontend

- **Framework**: React 18
- **Build Tool**: Vite
- **UI Library**: Ant Design
- **State Management**: React Context API
- **HTTP Client**: Axios
- **Routing**: React Router v6

### DevOps & Infrastructure

- **Containerization**: Docker, Docker Compose
- **CI/CD**: GitHub Actions
- **Registry**: GitHub Container Registry (GHCR)
- **Server**: Ubuntu 22.04 LTS
- **Reverse Proxy**: Nginx
- **Monitoring**: Spring Boot Actuator

## ğŸ“š TÃ i Liá»‡u

### HÆ°á»›ng Dáº«n Triá»ƒn Khai

- ğŸ“– [Quick Start Guide](md%20file/DEPLOYMENT_QUICKSTART.md) - Triá»ƒn khai nhanh trong 5 phÃºt
- ğŸ“– [Full Deployment Guide](deployment/README.md) - HÆ°á»›ng dáº«n chi tiáº¿t tá»«ng bÆ°á»›c
- ğŸ“– [DigitalOcean Setup](deployment/DIGITALOCEAN_SETUP.md) - Cáº¥u hÃ¬nh cloud infrastructure

### TÃ i Liá»‡u Ká»¹ Thuáº­t

- ğŸ“– [Architecture Overview](md%20file/ARCHITECTURE.md) - Kiáº¿n trÃºc vÃ  design patterns
- ğŸ“– [API Documentation](md%20file/API_DOCS.md) - RESTful API reference
- ğŸ“– [Database Schema](md%20file/DATABASE_SCHEMA.md) - Cáº¥u trÃºc database

### DevOps & Operations

- ğŸ“– [CI/CD Summary](md%20file/CICD_SUMMARY.md) - Quy trÃ¬nh CI/CD pipeline
- ğŸ“– [Commands Reference](md%20file/COMMANDS_REFERENCE.md) - CÃ¡c lá»‡nh thÆ°á»ng dÃ¹ng
- ğŸ“– [Deployment Checklist](md%20file/DEPLOYMENT_CHECKLIST.md) - Checklist triá»ƒn khai

## ğŸš€ Getting Started

### Prerequisites

- **Java 21** hoáº·c cao hÆ¡n
- **Node.js 18+** vÃ  npm/yarn
- **Docker** vÃ  Docker Compose
- **Git**
- **PostgreSQL 15+** (hoáº·c sá»­ dá»¥ng Docker)

### Local Development

#### 1. Clone Repository

```bash
git clone https://github.com/ntabodoiqua/cnweb_20251.git
cd cnweb_20251
```

#### 2. Setup Backend

```bash
cd backend

# Build táº¥t cáº£ services
./mvnw clean install -DskipTests

# Cháº¡y services báº±ng Docker Compose
docker-compose up -d

# Hoáº·c cháº¡y tá»«ng service riÃªng láº»
cd discovery-service && ./mvnw spring-boot:run
cd api-gateway && ./mvnw spring-boot:run
cd user-service && ./mvnw spring-boot:run
# ... cÃ¡c services khÃ¡c
```

#### 3. Setup Frontend

```bash
cd frontend

# Install dependencies
npm install

# Cháº¡y development server
npm run dev
```

Frontend sáº½ cháº¡y táº¡i: `http://localhost:5173`

### Production Deployment

#### 1. Setup Server

```bash
# SSH vÃ o server
ssh your-username@your-server-ip

# Cháº¡y setup script
curl -sSL https://raw.githubusercontent.com/ntabodoiqua/cnweb_20251/main/deployment/setup-server.sh | sudo bash

# Clone repository
cd /opt && sudo mkdir -p cnweb && sudo chown -R $USER:$USER cnweb
cd cnweb
git clone git@github.com:ntabodoiqua/cnweb_20251.git .
```

#### 2. Configure GitHub Secrets

VÃ o `Settings â†’ Secrets and variables â†’ Actions` vÃ  thÃªm:

| Secret            | MÃ´ Táº£                               |
| ----------------- | ----------------------------------- |
| `SSH_HOST`        | IP address cá»§a server               |
| `SSH_USERNAME`    | SSH username                        |
| `SSH_PRIVATE_KEY` | Private SSH key (~/.ssh/id_ed25519) |
| `SSH_PORT`        | SSH port (máº·c Ä‘á»‹nh: 22)             |

#### 3. Deploy vá»›i Tag

```bash
# Commit changes
git add .
git commit -m "Your changes description"
git push origin main

# Táº¡o tag Ä‘á»ƒ trigger deployment
git tag dev_$(date +%d.%m.%Y)_v1
git push origin dev_$(date +%d.%m.%Y)_v1
```

CI/CD pipeline sáº½ tá»± Ä‘á»™ng:

1. âœ… Build Docker images
2. âœ… Push images lÃªn GitHub Container Registry
3. âœ… Deploy lÃªn server
4. âœ… Run health checks

## ğŸ” Monitoring & Health Checks

### Service Health Endpoints

```bash
# Discovery Service
curl http://YOUR_SERVER_IP:8761/actuator/health

# API Gateway
curl http://YOUR_SERVER_IP:8080/actuator/health

# User Service
curl http://YOUR_SERVER_IP:8081/actuator/health

# Product Service
curl http://YOUR_SERVER_IP:8082/actuator/health

# Order Service
curl http://YOUR_SERVER_IP:8083/actuator/health

# Notification Service
curl http://YOUR_SERVER_IP:8084/actuator/health

# Payment Service
curl http://YOUR_SERVER_IP:8085/actuator/health

# File Service
curl http://YOUR_SERVER_IP:8086/actuator/health
```

### Monitoring Script

```bash
cd /opt/cnweb/deployment
./monitor.sh

# Xem logs
./monitor.sh logs service-name

# Rollback deployment
./rollback.sh
```

## ğŸ“Š API Endpoints

### Authentication

- `POST /api/auth/register` - ÄÄƒng kÃ½ tÃ i khoáº£n
- `POST /api/auth/login` - ÄÄƒng nháº­p
- `POST /api/auth/refresh` - Refresh token
- `POST /api/auth/logout` - ÄÄƒng xuáº¥t

### User Management

- `GET /api/users` - Danh sÃ¡ch users (Admin)
- `GET /api/users/{id}` - Chi tiáº¿t user
- `PUT /api/users/{id}` - Cáº­p nháº­t user
- `DELETE /api/users/{id}` - XÃ³a user (Admin)

### Products

- `GET /api/products` - Danh sÃ¡ch sáº£n pháº©m
- `GET /api/products/{id}` - Chi tiáº¿t sáº£n pháº©m
- `POST /api/products` - Táº¡o sáº£n pháº©m (Seller/Admin)
- `PUT /api/products/{id}` - Cáº­p nháº­t sáº£n pháº©m
- `DELETE /api/products/{id}` - XÃ³a sáº£n pháº©m

### Orders

- `GET /api/orders` - Danh sÃ¡ch Ä‘Æ¡n hÃ ng
- `GET /api/orders/{id}` - Chi tiáº¿t Ä‘Æ¡n hÃ ng
- `POST /api/orders` - Táº¡o Ä‘Æ¡n hÃ ng
- `PUT /api/orders/{id}/status` - Cáº­p nháº­t tráº¡ng thÃ¡i

_Xem chi tiáº¿t táº¡i [API Documentation](md%20file/API_DOCS.md)_

## ğŸ§ª Testing

### Backend Tests

```bash
cd backend

# Run all tests
./mvnw test

# Run tests for specific service
cd user-service && ./mvnw test

# Run with coverage
./mvnw test jacoco:report
```

### Frontend Tests

```bash
cd frontend

# Run tests
npm test

# Run with coverage
npm run test:coverage
```

## ğŸ› Troubleshooting

### Common Issues

**Service khÃ´ng start Ä‘Æ°á»£c:**

```bash
# Check logs
docker-compose logs service-name

# Restart service
docker-compose restart service-name
```

**Database connection failed:**

```bash
# Kiá»ƒm tra PostgreSQL status
docker-compose ps postgres

# Check connection string trong application.properties
```

**Port already in use:**

```bash
# TÃ¬m process Ä‘ang dÃ¹ng port
netstat -ano | findstr :8080

# Kill process
taskkill /PID <process_id> /F
```

Xem thÃªm táº¡i [Troubleshooting Guide](deployment/README.md#troubleshooting)

## ğŸ¤ Contributing

1. Fork repository
2. Táº¡o feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Táº¡o Pull Request

## ğŸ“„ License

Dá»± Ã¡n giÃ¡o dá»¥c - TrÆ°á»ng Äáº¡i há»c BÃ¡ch khoa HÃ  Ná»™i 2025.  
Chá»‰ sá»­ dá»¥ng cho má»¥c Ä‘Ã­ch há»c táº­p.

## ğŸ“ Contact & Support

- ğŸ“§ Email: [anh.nt224921@sis.hust.edu.vn](mailto:nguyentheanh@hust.edu.vn)
- ğŸ› Issues: [GitHub Issues](https://github.com/ntabodoiqua/cnweb_20251/issues)
- ğŸ“– Wiki: [Project Wiki](https://github.com/ntabodoiqua/cnweb_20251/wiki)

---

**Made with â¤ï¸ by HUST Students**
